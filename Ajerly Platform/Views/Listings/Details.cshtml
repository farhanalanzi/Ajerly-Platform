@using System.Linq
@model Ajerly_Platform.Models.Listing

<div class="details-container">
    <button class="btn-back" onclick="history.back()">&larr; العودة</button>

    <div class="details-grid">
        <div class="details-image">
            @if (Model.Images.Any())
            {
                <img id="mainImg" src="@Model.Images.First().ImageUrl" alt="@Model.Title" />
                <div class="thumbs">
                    @foreach (var img in Model.Images.Skip(1))
                    {
                        <img src="@img.ImageUrl" alt="thumb" class="thumb" onclick="document.getElementById('mainImg').src='@img.ImageUrl';" />
                    }
                </div>
            }
            else
            {
                <img id="mainImg" src="/images/default.jpg" alt="@Model.Title" />
            }
        </div>

        <div class="details-info">
            <span class="listing-tag">عرض</span>
            <h1>@Model.Title</h1>

            <p class="meta"><strong>التصنيف:</strong> <span>@Model.Category</span></p>
            <p class="desc">@Model.Description</p>

            <p class="meta"><strong>المدينة:</strong> <span>@Model.City</span></p>
            <p class="meta"><strong>السعر:</strong> <span class="price">@Model.Price ريال/@Model.PriceUnit</span></p>
            <p class="meta"><strong>الجوال:</strong> <a class="phone-link" href="tel:@Model.Phone">@Model.Phone</a></p>

            <p class="created"><small>نُشر في: @Model.CreatedAt.ToString("yyyy-MM-dd")</small></p>

            <div class="details-actions">
                <a class="btn-contact" href="tel:@Model.Phone">اتصل بالبائع</a>
                <a class="btn-message" href="mailto:?subject=استفسار عن: @Model.Title">راسل البائع</a>
            </div>
        </div>
    </div>
</div>
