@model Ajerly_Platform.Models.Listing

<section class="create-section">
    <h1>أضف عرضك</h1>
    <p>شارك منتجك وحقق دخلاً إضافياً من خلال تأجيره</p>

    <form asp-action="Create" method="post" enctype="multipart/form-data">
        @Html.AntiForgeryToken()
        <div asp-validation-summary="ModelOnly" class="text-danger" style="margin-bottom:12px;"></div>
         <div class="form-group">
             <label>عنوان الإعلان *</label>
             <input asp-for="Title" class="form-control" placeholder="مثال: سوني 5 للايجار" maxlength="20" />
            <span asp-validation-for="Title" class="text-danger"></span>
           
         </div>

        <div class="form-group">
            <label>التصنيف *</label>
            <select asp-for="Category" class="form-control">
                <option value="">اختر التصنيف</option>
                <option>ألعاب وترفيه</option>
                <option>مستلزمات المنزل</option>
                <option>مستلزمات السفر</option>
                <option>السيارة</option>
                <option>الأجهزة</option>
                <option>الأثاث</option>
                <option>الملابس والأزياء</option>
            </select>
        </div>

        <div class="form-group">
            <label>تفاصيل الإعلان *</label>
            <textarea asp-for="Description" class="form-control" placeholder="اكتب تفاصيل المنتج، الحالة، والميزات..." maxlength="70"></textarea>
            <span asp-validation-for="Description" class="text-danger"></span>
         </div>

        <div class="form-group">
            <label>سعر الإيجار *</label>
            <input asp-for="Price" class="form-control" placeholder="ريال/يوم" maxlength="5" pattern="^\d{1,5}$" inputmode="numeric" />
            <span asp-validation-for="Price" class="text-danger"></span>
         </div>

        <div class="form-group">
            <label>الوحدة</label>
            <select asp-for="PriceUnit" class="form-control">
                <option>ريال/يوم</option>
                <option>ريال/ساعة</option>
                <option>ريال/أسبوع</option>
            </select>
        </div>

        <div class="form-group">
            <label>المدينة *</label>
            <input asp-for="City" class="form-control" placeholder=" المدينة" maxlength="12" />
            <span asp-validation-for="City" class="text-danger"></span>
         </div>

        <div class="form-group">
            <label>رقم الجوال للتواصل *</label>
            <input asp-for="Phone" class="form-control" placeholder="05xxxxxxxx" maxlength="10" pattern="^\d{1,10}$" inputmode="numeric" />
            <span asp-validation-for="Phone" class="text-danger"></span>
         </div>

        <div class="form-group">
            <label>صور المنتج (اختياري)</label>
            <input type="file" name="images" multiple class="form-control" accept=".jpg,.png" />
            <small>اختر صوراً أو أسقطها هنا — حتى 10MB PNG, JPG</small>
        </div>

        <button type="submit" class="btn-publish">نشر العرض</button>
    </form>
</section>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        (function(){
            // enforce numeric-only on inputs with inputmode numeric
            function enforceNumeric(el){
                el.addEventListener('input', function(){
                    var cleaned = this.value.replace(/[^0-9]/g, '');
                    if(this.maxLength > 0) cleaned = cleaned.slice(0, this.maxLength);
                    if(this.value !== cleaned) this.value = cleaned;
                });
            }

            document.addEventListener('DOMContentLoaded', function(){
                var price = document.querySelector('input[asp-for="Price"], input[name="Price"]') || document.querySelector('input[inputmode="numeric"]');
                var phone = document.querySelector('input[asp-for="Phone"], input[name="Phone"]');
                if(price) enforceNumeric(price);
                if(phone) enforceNumeric(phone);

                // Title and Description maxlength enforced by native maxlength attribute; provide live counter if desired
            });
        })();
    </script>
}
